"use strict";(self.webpackChunkcommerce_services=self.webpackChunkcommerce_services||[]).push([[8290],{52219:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return o},default:function(){return N}});var a=n(87462),r=n(45987),d=(n(35776),n(3905)),m=n(91515),l=n(75030);const i=["components"],o={},p=(u="InlineAlert",function(e){return console.warn("Component "+u+" was not imported, exported, or provided by MDXProvider as global scope"),(0,d.mdx)("div",e)});var u;const s={_frontmatter:o},x=m.Z;function N(e){let{components:t}=e,n=(0,r.Z)(e,i);return(0,d.mdx)(x,(0,a.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,d.mdx)("h1",{id:"recommendations-query"},"recommendations query"),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"recommendations")," query returns information about product recommendation blocks for a given SKU."),(0,d.mdx)("p",null,"Merchants must have both Product Recommendations and Catalog Service (v2.2.0+) installed to get complete data through the storefront gateway."),(0,d.mdx)(p,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"recommendations")," query does not support the ",(0,d.mdx)("inlineCode",{parentName:"p"},"alternateEnvironmentId")," attribute."),(0,d.mdx)("h2",{id:"required-headers"},"Required headers"),(0,d.mdx)("p",null,"You must specify the following HTTP headers to run this query."),(0,d.mdx)(l.Z,{mdxType:"Docs"}),(0,d.mdx)("h2",{id:"syntax"},"Syntax"),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-graphql"},"recommendations(\n    currentSku: String,\n    userPurchaseHistory: [PurchaseHistory],\n    userViewHistory: [ViewHistory],\n    cartSkus: [String],\n    category: String,\n    pageType: PageType\n): Recommendations\n")),(0,d.mdx)("h2",{id:"example-usage"},"Example usage"),(0,d.mdx)("p",null,"The following query returns product recommendations for SKU ",(0,d.mdx)("inlineCode",{parentName:"p"},"MP01"),"."),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Request:")),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-graphql"},'{\nrecommendations(currentSku: "MP01", pageType: Product) {\n    totalResults\n    results {\n        unitId\n        unitName\n        totalProducts\n        pageType\n        typeId\n        storefrontLabel\n        displayOrder\n        productsView {\n            sku\n            rank\n            score\n            queryType\n            categories\n            visibility\n        }\n    }\n}\n}\n')),(0,d.mdx)("p",null,(0,d.mdx)("strong",{parentName:"p"},"Response:")),(0,d.mdx)("pre",null,(0,d.mdx)("code",{parentName:"pre",className:"language-json"},'"data": {\n    "recommendations": {\n        "totalResults": 1,\n        "results": [\n            {\n                "unitId": "6401de2a-7499-4648-847c-b1d62f6ee947",\n                "unitName": "PDMLT",\n                "totalProducts": 5,\n                "pageType": "Product",\n                "typeId": "more-like-this",\n                "storefrontLabel": "PDMLT",\n                "displayOrder": 2,\n                "productsView": [\n                    {\n                        "sku": "MP08",\n                        "rank": 1,\n                        "score": 80.98603,\n                        "queryType": "primary",\n                        "categories": [\n                            "collections/yoga-new",\n                            "men/bottoms-men",\n                            "men/bottoms-men/pants-men",\n                            "promotions/pants-all",\n                            "sale"\n                        ],\n                        "visibility": "Catalog, Search"\n                    },\n                    {\n                        "sku": "WP05",\n                        "rank": 2,\n                        "score": 47.418564,\n                        "queryType": "primary",\n                        "categories": [\n                            "women/bottoms-women",\n                            "women/bottoms-women/pants-women",\n                            "promotions/pants-all",\n                            "collections/erin-recommends"\n                        ],\n                        "visibility": "Catalog, Search"\n                    },\n                    {\n                        "sku": "WP04",\n                        "rank": 3,\n                        "score": 46.906868,\n                        "queryType": "primary",\n                        "categories": [\n                            "women/bottoms-women",\n                            "women/bottoms-women/pants-women",\n                            "promotions/pants-all"\n                        ],\n                        "visibility": "Catalog, Search"\n                    },\n                    {\n                        "sku": "WP02",\n                        "rank": 4,\n                        "score": 44.674534,\n                        "queryType": "primary",\n                        "categories": [\n                            "women/bottoms-women",\n                            "women/bottoms-women/pants-women",\n                            "promotions/pants-all",\n                            "collections/performance-fabrics"\n                        ],\n                        "visibility": "Catalog, Search"\n                    },\n                    {\n                        "sku": "WP01",\n                        "rank": 5,\n                        "score": 41.731136,\n                        "queryType": "primary",\n                        "categories": [\n                            "women/bottoms-women",\n                            "women/bottoms-women/pants-women",\n                            "promotions/pants-all",\n                            "collections/performance-fabrics"\n                        ],\n                        "visibility": "Catalog, Search"\n                    }\n                ]\n            }\n        ]\n    }\n}\n')),(0,d.mdx)("h2",{id:"input-fields"},"Input fields"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Field"),(0,d.mdx)("th",{parentName:"tr",align:null},"Data type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"cartSKUs")),(0,d.mdx)("td",{parentName:"tr",align:null},"[String]"),(0,d.mdx)("td",{parentName:"tr",align:null},"SKUs of the products in the cart.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"category")),(0,d.mdx)("td",{parentName:"tr",align:null},"String"),(0,d.mdx)("td",{parentName:"tr",align:null},"The category currently being viewed.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"currentSKU")),(0,d.mdx)("td",{parentName:"tr",align:null},"String"),(0,d.mdx)("td",{parentName:"tr",align:null},"SKU of the product currently being viewed on the product detail page.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"pageType")),(0,d.mdx)("td",{parentName:"tr",align:null},"PageType"),(0,d.mdx)("td",{parentName:"tr",align:null},"An enum indicating the type of page on which recommendations are requested. Possible values are Cart, Category, Checkout, CMS, PageBuilder and Product.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"userPurchaseHistory")),(0,d.mdx)("td",{parentName:"tr",align:null},"[PurchaseHistory]"),(0,d.mdx)("td",{parentName:"tr",align:null},"User purchase history with timestamp.")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"userViewHistory")),(0,d.mdx)("td",{parentName:"tr",align:null},"[ViewHistory]"),(0,d.mdx)("td",{parentName:"tr",align:null},"User view history with timestamp.")))),(0,d.mdx)("h3",{id:"purchasedhistory"},"PurchasedHistory"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Field"),(0,d.mdx)("th",{parentName:"tr",align:null},"Data type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"date")),(0,d.mdx)("td",{parentName:"tr",align:null},"DateTime"),(0,d.mdx)("td",{parentName:"tr",align:null},"Date of purchase")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"items")),(0,d.mdx)("td",{parentName:"tr",align:null},"[String]","!"),(0,d.mdx)("td",{parentName:"tr",align:null},"A list of items purchased")))),(0,d.mdx)("h3",{id:"viewhistory"},"ViewHistory"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Field"),(0,d.mdx)("th",{parentName:"tr",align:null},"Data type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"date")),(0,d.mdx)("td",{parentName:"tr",align:null},"DateTime"),(0,d.mdx)("td",{parentName:"tr",align:null},"The time the items were viewed")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"sku")),(0,d.mdx)("td",{parentName:"tr",align:null},"[String]","!"),(0,d.mdx)("td",{parentName:"tr",align:null},"A list of SKUs viewed")))),(0,d.mdx)("h2",{id:"output-fields"},"Output fields"),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"Recommendations")," object contains details about recommended products for a given SKU. It contains the following attributes."),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,d.mdx)("th",{parentName:"tr",align:null},"Data Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"results")),(0,d.mdx)("td",{parentName:"tr",align:null},"[RecommendationUnit]"),(0,d.mdx)("td",{parentName:"tr",align:null},"Array of recommendation units for recommended products")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"totalResults")),(0,d.mdx)("td",{parentName:"tr",align:null},"Int"),(0,d.mdx)("td",{parentName:"tr",align:null},"Total number of recommendation units for returned recommendation")))),(0,d.mdx)("h3",{id:"recommendationunit-attributes"},"RecommendationUnit attributes"),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,d.mdx)("th",{parentName:"tr",align:null},"Data Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"displayOrder")),(0,d.mdx)("td",{parentName:"tr",align:null},"Int"),(0,d.mdx)("td",{parentName:"tr",align:null},"Order in which recommendation units are displayed")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"pageType")),(0,d.mdx)("td",{parentName:"tr",align:null},"String"),(0,d.mdx)("td",{parentName:"tr",align:null},"Page Type")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"productsView")),(0,d.mdx)("td",{parentName:"tr",align:null},"[ProductView]"),(0,d.mdx)("td",{parentName:"tr",align:null},"List of product view")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"storefrontLabel")),(0,d.mdx)("td",{parentName:"tr",align:null},"String"),(0,d.mdx)("td",{parentName:"tr",align:null},"Storefront label to be displayed on the storefront")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"totalProducts")),(0,d.mdx)("td",{parentName:"tr",align:null},"Int"),(0,d.mdx)("td",{parentName:"tr",align:null},"Total number of products returned for a recommendation")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"typeId")),(0,d.mdx)("td",{parentName:"tr",align:null},"String"),(0,d.mdx)("td",{parentName:"tr",align:null},"Type of recommendation")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"unitId")),(0,d.mdx)("td",{parentName:"tr",align:null},"String"),(0,d.mdx)("td",{parentName:"tr",align:null},"Id of the preconfigured unit")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"unitName")),(0,d.mdx)("td",{parentName:"tr",align:null},"String"),(0,d.mdx)("td",{parentName:"tr",align:null},"Name of the preconfigured unit")))),(0,d.mdx)("h3",{id:"productview-interface"},"ProductView interface"),(0,d.mdx)("p",null,"The ",(0,d.mdx)("inlineCode",{parentName:"p"},"ProductView")," return object is an interface that can contain the following fields. It is implemented by the ",(0,d.mdx)("inlineCode",{parentName:"p"},"SimpleProductView")," and ",(0,d.mdx)("inlineCode",{parentName:"p"},"ComplexProductView")," types. Both these types contain the same set of fields as ",(0,d.mdx)("inlineCode",{parentName:"p"},"ProductView"),"."),(0,d.mdx)("table",null,(0,d.mdx)("thead",{parentName:"table"},(0,d.mdx)("tr",{parentName:"thead"},(0,d.mdx)("th",{parentName:"tr",align:null},"Attribute"),(0,d.mdx)("th",{parentName:"tr",align:null},"Data Type"),(0,d.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,d.mdx)("tbody",{parentName:"table"},(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"categories")),(0,d.mdx)("td",{parentName:"tr",align:null},"[String]"),(0,d.mdx)("td",{parentName:"tr",align:null},"List of categories to which the product belongs")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"rank")),(0,d.mdx)("td",{parentName:"tr",align:null},"Int"),(0,d.mdx)("td",{parentName:"tr",align:null},"Rank given to a product")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"queryType")),(0,d.mdx)("td",{parentName:"tr",align:null},"String"),(0,d.mdx)("td",{parentName:"tr",align:null},"Indicates if the product was retrieved from the primary or backup query")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"score")),(0,d.mdx)("td",{parentName:"tr",align:null},"Float"),(0,d.mdx)("td",{parentName:"tr",align:null},"Score indicating relevance of the product to the recommendation type")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"sku")),(0,d.mdx)("td",{parentName:"tr",align:null},"String!"),(0,d.mdx)("td",{parentName:"tr",align:null},"The product SKU")),(0,d.mdx)("tr",{parentName:"tbody"},(0,d.mdx)("td",{parentName:"tr",align:null},(0,d.mdx)("inlineCode",{parentName:"td"},"visibility")),(0,d.mdx)("td",{parentName:"tr",align:null},"String"),(0,d.mdx)("td",{parentName:"tr",align:null},"Visibility setting of the product")))))}N.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-graphql-recommendations-recommendations-md-c2a0e225bfc17d32f09d.js.map